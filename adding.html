<?php 
	function menu_create ($menu_type, $menu_name, $item_name, $file_name, $hint) 
	/*
	При указании в качестве переменной $hint любого числа, комментарий печататься не будет.
	$menu_type = checkbox - чекбокс
	$menu_type = rollout - выпадающий список
	$menu_type = radio - радиокнопка
	*/
		{
			$jsonString = file_get_contents($file_name);
			$menu_array = json_decode($jsonString);
			$line = count($menu_array->Contents);

			switch ($menu_type) {
				case "rollout" :
					echo "<p>\n<select name=\"$menu_name\" id=\"$menu_name\" size=\"1\">\n<option value=\"none\">...</option>\n";	
					for ($i=0; $i < $line; $i++) { 
						echo "<option value='".$i."'>".$menu_array->Contents[$i]->$item_name . "</option>\n";
						//echo $menu_array->Contents[$i]->$item_name . "<br>";
					}
					echo "</select>\n";
					break;
				case "checkbox" :
					echo "<p>\n";
					for ($i=0; $i < $line; $i++) {
						echo "<input type=\"checkbox\" name=\"$menu_name".$i."\" value='$k'>".$menu_array->Contents[$i]->$item_name."<br>\n";
					}
					break;
				case "radio" :
					# code...
					break;
			}

			if (is_numeric($hint)) {
					echo "</p>\n\n";
			}
			else {
					echo "<small>$hint</small>\n";
					echo "</p>\n\n";
			}
						
		}


?>
<div class="contents">
	<h2>Добавление нового объекта</h2> <br>
	<small>*Все поля являются обязательными для заполнения.</small>
	<form action="add_object.php" method="post" name="new_hotel">
		<p>
			<input type="text" name="hotel_name" id="hotel_name" value="" size="25" />
			<small> Название</small>
		</p>

		<?php
				menu_create ("rollout","HotelType","HotelTypeName","res/hotel_type.json","Тип отеля");
				menu_create ("rollout","ZoneSelect","zoneName","res/zones.json","Зона побережья"); 

				echo "<small> Период работы.</small><br>\n<small>C:</small>\n";

				menu_create ("rollout","StartMonth","MonthName","res/monthes.json","0");

				echo "<small>По:</small>\n";

				menu_create ("rollout","EndMonth","MonthName","res/monthes.json","0");
				menu_create ("checkbox","rt","RoomTypeName","res/rooms.json","0");
		?>
			
		<p>
			<select name="TownSelect" id="TownSelect" size="1">
			<option value="none">...</option>
			</select>
			<small>Населённый пункт</small>
		</p>

		<script type="text/javascript">
			$("#ZoneSelect").change(function(){
				$("#TownSelect").load("handler.php", { id: $("#ZoneSelect option:selected").val() });
			});
		</script> 
		
		<p>
			<input type="text" name="lacation" id="location" value="" size="25" />
			<small>Расположение  (например "в центре города, недалеко от рынка")</small>
		</p>

		<p>
			<input type="text" name="email" id="email" value="" size="25" />
		</p>

		<p>
			<small> Краткое описание</small> <br>
			<textarea name="comment" id="comment" cols="48" rows="8"> </textarea>
		</p>

		<p>
			<input type="submit" value="Отправить">
		</p>
	</form>

</div>