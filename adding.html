<?php 
	function menu_create ($menu_type, $menu_name, $item_id, $item_name, $file_name, $hint) 
	/*
	При указании в качестве переменной $hint любого числа, комментарий печататься не будет.
	$menu_type = checkbox - чекбокс
	$menu_type = rollout - выпадающий список
	$menu_type = radio - радиокнопка
	*/
		{
			$jsonString = file_get_contents($file_name);
			$menu_array = json_decode($jsonString);

			switch ($menu_type) {
				case "rollout" :
					echo "<p>\n<select name=\"$menu_name\" id=\"$menu_name\" size=\"1\">\n<option value='0'>...</option>\n";
					foreach ($menu_array->Contents as $Contents) {
						echo "<option value='".$Contents->$item_id."'>".$Contents->$item_name."</option>\n";
					}
					echo "</select>\n";
					break;
				case "checkbox" :
					echo "<p>\n";
					foreach ($menu_array->Contents as $Contents) {
						echo "<input type=\"checkbox\" name=\"$menu_name".$Contents->$item_id."\" value='$k'>".$Contents->$item_name."<br>\n";
					}
					break;
				case "radio" :
					# code...
					break;
			}

			if (is_numeric($hint)) {
					echo "</p>\n\n";
			}
			else {
					echo "<small>$hint</small>\n";
					echo "</p>\n\n";
			}
						
		}


?>
<div class="contents">
	<h2>Добавление нового объекта</h2> <br>
	<small>*Все поля являются обязательными для заполнения.</small>
	<form action="add_object.php" method="post" name="new_hotel">
		<p>
			<input type="text" name="hotel_name" id="hotel_name" value="" size="25" />
			<small> Название</small>
		</p>

		<?php
				menu_create ("rollout","HotelType","HotelTypeID","HotelTypeName","res/hotel_type.json","Тип отеля");
				menu_create ("rollout","ZoneSelect","zoneID","zoneName","res/zones.json","Зона побережья"); 
		?>

<p>
	<select disabled="disabled" name="TownSelect" id="TownSelect" size="1">
   		<option>Выберите зону</option>
	</select>
	<small>Населённый пункт</small>
</p>

		<?php

				echo "<small> Период работы.</small><br>\n<small>C:</small>\n";

				menu_create ("rollout","StartMonth","MonthNumber","MonthName","res/monthes.json","0");

				echo "<small>По:</small>\n";

				menu_create ("rollout","EndMonth","MonthNumber","MonthName","res/monthes.json","0");
				menu_create ("checkbox","rt","RoomTypeID","RoomTypeName","res/rooms.json","0");
		?>

		<p>
			<input type="text" name="lacation" id="location" value="" size="25" />
			<small>Расположение  (например "в центре города, недалеко от рынка")</small>
		</p>

		<p>
			<input type="text" name="email" id="email" value="" size="25" />
		</p>

		<p>
			<small> Краткое описание</small> <br>
			<textarea name="comment" id="comment" cols="48" rows="8"> </textarea>
		</p>

		<p>
			<input type="submit" value="Отправить">
		</p>
	</form>

</div>